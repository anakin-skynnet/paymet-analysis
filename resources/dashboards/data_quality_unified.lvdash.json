{
  "datasets": [
    {
      "name": "m0_ds_quality_summary",
      "displayName": "Data Quality Summary",
      "queryLines": [
        "SELECT bronze_last_24h, silver_last_24h, retention_pct_24h, latest_bronze_ingestion, latest_silver_event FROM __CATALOG__.__SCHEMA__.v_data_quality_summary"
      ]
    },
    {
      "name": "m0_ds_bronze_by_second",
      "displayName": "Bronze Ingestion by Second",
      "queryLines": [
        "SELECT event_second, bronze_record_count FROM __CATALOG__.__SCHEMA__.v_streaming_ingestion_by_second ORDER BY event_second DESC"
      ]
    },
    {
      "name": "m0_ds_silver_by_second",
      "displayName": "Silver Processed by Second",
      "queryLines": [
        "SELECT event_second, silver_record_count FROM __CATALOG__.__SCHEMA__.v_silver_processed_by_second ORDER BY event_second DESC"
      ]
    },
    {
      "name": "m0_ds_volume_per_second",
      "displayName": "Incoming volume per second",
      "queryLines": [
        "SELECT event_second, records_per_second FROM __CATALOG__.__SCHEMA__.v_streaming_volume_per_second ORDER BY event_second DESC"
      ]
    },
    {
      "name": "m1_ds_performance_by_second",
      "displayName": "Performance by Second (Real-Time)",
      "queryLines": [
        "SELECT event_second, transaction_count, approved_count, approval_rate_pct, avg_fraud_score, total_value FROM __CATALOG__.__SCHEMA__.v_approval_trends_by_second ORDER BY event_second DESC"
      ]
    },
    {
      "name": "m1_ds_last_hour",
      "displayName": "Last Hour Summary KPIs",
      "queryLines": [
        "SELECT transactions_last_hour, approval_rate_pct, avg_fraud_score, total_value, active_segments, high_risk_transactions, declines_last_hour FROM __CATALOG__.__SCHEMA__.v_last_hour_performance"
      ]
    },
    {
      "name": "m1_ds_alerts",
      "displayName": "Active Alerts",
      "queryLines": [
        "SELECT alert_type, severity, metric_name, ROUND(current_value, 2) as current_value, ROUND(threshold_value, 2) as threshold_value, alert_message, first_detected FROM __CATALOG__.__SCHEMA__.v_active_alerts ORDER BY CASE severity WHEN 'CRITICAL' THEN 1 WHEN 'HIGH' THEN 2 WHEN 'MEDIUM' THEN 3 ELSE 4 END, first_detected DESC"
      ]
    },
    {
      "name": "m2_ds_by_country",
      "displayName": "Performance by Country",
      "queryLines": [
        "SELECT country, transaction_count, approval_rate_pct, avg_fraud_score, total_transaction_value, unique_merchants FROM __CATALOG__.__SCHEMA__.v_performance_by_geography ORDER BY transaction_count DESC"
      ]
    }
  ],
  "pages": [
    {
      "name": "page_streaming",
      "displayName": "Streaming & Data Quality",
      "layout": [
        {
          "widget": {
            "name": "ctr_bronze_24h",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_quality_summary", "fields": [{"name": "bronze_last_24h", "expression": "`bronze_last_24h`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "bronze_last_24h", "displayName": "Bronze Records (24h)"}}, "frame": {"showTitle": true, "title": "Bronze Records (24h)", "showDescription": false}}
          },
          "position": {"x": 0, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_silver_24h",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_quality_summary", "fields": [{"name": "silver_last_24h", "expression": "`silver_last_24h`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "silver_last_24h", "displayName": "Silver Records (24h)"}}, "frame": {"showTitle": true, "title": "Silver Records (24h)", "showDescription": false}}
          },
          "position": {"x": 4, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_retention",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_quality_summary", "fields": [{"name": "retention_pct_24h", "expression": "`retention_pct_24h`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "retention_pct_24h", "displayName": "Retention Rate %"}}, "frame": {"showTitle": true, "title": "Retention Rate %", "showDescription": false}}
          },
          "position": {"x": 8, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "line_volume_per_second",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_volume_per_second", "fields": [{"name": "event_second", "expression": "`event_second`"}, {"name": "sum(records_per_second)", "expression": "SUM(`records_per_second`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "area", "encodings": {"x": {"fieldName": "event_second", "scale": {"type": "temporal"}, "displayName": "Time", "axis": {"title": "Time"}}, "y": {"fieldName": "sum(records_per_second)", "scale": {"type": "quantitative"}, "displayName": "Records Per Second", "axis": {"title": "Records Per Second"}}}, "frame": {"showTitle": true, "title": "Incoming Volume per Second", "showDescription": false}}
          },
          "position": {"x": 0, "y": 2, "width": 12, "height": 4}
        },
        {
          "widget": {
            "name": "bbd77b111db2",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_bronze_by_second", "fields": [{"name": "event_second", "expression": "`event_second`"}, {"name": "sum(bronze_record_count)", "expression": "SUM(`bronze_record_count`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "area", "encodings": {"x": {"fieldName": "event_second", "scale": {"type": "temporal"}, "displayName": "Time", "axis": {"title": "Time"}}, "y": {"fieldName": "sum(bronze_record_count)", "scale": {"type": "quantitative"}, "displayName": "Bronze Record Count", "axis": {"title": "Bronze Record Count"}}}, "frame": {"showTitle": true, "title": "Bronze Ingestion by Second", "showDescription": false}}
          },
          "position": {"x": 0, "y": 6, "width": 6, "height": 4}
        },
        {
          "widget": {
            "name": "18916a35d710",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_silver_by_second", "fields": [{"name": "event_second", "expression": "`event_second`"}, {"name": "sum(silver_record_count)", "expression": "SUM(`silver_record_count`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "area", "encodings": {"x": {"fieldName": "event_second", "scale": {"type": "temporal"}, "displayName": "Time", "axis": {"title": "Time"}}, "y": {"fieldName": "sum(silver_record_count)", "scale": {"type": "quantitative"}, "displayName": "Silver Record Count", "axis": {"title": "Silver Record Count"}}}, "frame": {"showTitle": true, "title": "Silver Processed by Second", "showDescription": false}}
          },
          "position": {"x": 6, "y": 6, "width": 6, "height": 4}
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "page_realtime",
      "displayName": "Real-Time Payment Monitoring",
      "layout": [
        {
          "widget": {
            "name": "ctr_txns_hour",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_last_hour", "fields": [{"name": "transactions_last_hour", "expression": "`transactions_last_hour`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "transactions_last_hour", "displayName": "Transactions (Last Hour)"}}, "frame": {"showTitle": true, "title": "Transactions (Last Hour)", "showDescription": false}}
          },
          "position": {"x": 0, "y": 0, "width": 3, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_hour_approval",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_last_hour", "fields": [{"name": "approval_rate_pct", "expression": "`approval_rate_pct`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "approval_rate_pct", "displayName": "Approval Rate %"}}, "frame": {"showTitle": true, "title": "Approval Rate %", "showDescription": false}}
          },
          "position": {"x": 3, "y": 0, "width": 3, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_hour_fraud",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_last_hour", "fields": [{"name": "avg_fraud_score", "expression": "`avg_fraud_score`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "avg_fraud_score", "displayName": "Avg Fraud Score"}}, "frame": {"showTitle": true, "title": "Avg Fraud Score", "showDescription": false}}
          },
          "position": {"x": 6, "y": 0, "width": 3, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_hour_declines",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_last_hour", "fields": [{"name": "declines_last_hour", "expression": "`declines_last_hour`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "declines_last_hour", "displayName": "Declines (Last Hour)"}}, "frame": {"showTitle": true, "title": "Declines (Last Hour)", "showDescription": false}}
          },
          "position": {"x": 9, "y": 0, "width": 3, "height": 2}
        },
        {
          "widget": {
            "name": "rt_ts_volume",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_performance_by_second", "fields": [{"name": "event_second", "expression": "`event_second`"}, {"name": "transaction_count", "expression": "`transaction_count`"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "line", "encodings": {"x": {"fieldName": "event_second", "scale": {"type": "temporal"}, "displayName": "Time", "axis": {"title": "Time"}}, "y": {"fieldName": "transaction_count", "scale": {"type": "quantitative"}, "displayName": "Transactions", "axis": {"title": "Transactions per Second"}}}, "frame": {"showTitle": true, "title": "Real-Time Volume by Second", "showDescription": false}}
          },
          "position": {"x": 0, "y": 2, "width": 6, "height": 4}
        },
        {
          "widget": {
            "name": "rt_ts_approval",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_performance_by_second", "fields": [{"name": "event_second", "expression": "`event_second`"}, {"name": "approval_rate_pct", "expression": "`approval_rate_pct`"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "line", "encodings": {"x": {"fieldName": "event_second", "scale": {"type": "temporal"}, "displayName": "Time", "axis": {"title": "Time"}}, "y": {"fieldName": "approval_rate_pct", "scale": {"type": "quantitative"}, "displayName": "Approval Rate %", "axis": {"title": "Approval Rate %"}}}, "frame": {"showTitle": true, "title": "Real-Time Approval Rate by Second", "showDescription": false}}
          },
          "position": {"x": 6, "y": 2, "width": 6, "height": 4}
        },
        {
          "widget": {
            "name": "rt_alerts",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_alerts", "fields": [{"name": "alert_type", "expression": "`alert_type`"}, {"name": "severity", "expression": "`severity`"}, {"name": "metric_name", "expression": "`metric_name`"}, {"name": "current_value", "expression": "`current_value`"}, {"name": "threshold_value", "expression": "`threshold_value`"}, {"name": "alert_message", "expression": "`alert_message`"}, {"name": "first_detected", "expression": "`first_detected`"}], "disaggregated": true}}],
            "spec": {"version": 1, "widgetType": "table", "encodings": {"columns": [{"fieldName": "severity", "displayName": "Severity"}, {"fieldName": "alert_type", "displayName": "Type"}, {"fieldName": "metric_name", "displayName": "Metric"}, {"fieldName": "current_value", "displayName": "Current"}, {"fieldName": "threshold_value", "displayName": "Threshold"}, {"fieldName": "alert_message", "displayName": "Message"}, {"fieldName": "first_detected", "displayName": "Detected"}]}, "frame": {"showTitle": true, "title": "Active Alerts", "showDescription": false}}
          },
          "position": {"x": 0, "y": 6, "width": 12, "height": 4}
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "page_global",
      "displayName": "Global Coverage - World Map by Country",
      "layout": [
        {
          "widget": {
            "name": "ae43b765254c",
            "queries": [{"name": "main_query", "query": {"datasetName": "m2_ds_by_country", "fields": [{"name": "country", "expression": "`country`"}, {"name": "sum(transaction_count)", "expression": "SUM(`transaction_count`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "choropleth", "encodings": {"color": {"fieldName": "sum(transaction_count)", "scale": {"type": "quantitative"}, "displayName": "Transaction Count"}, "region": {"fieldName": "country", "displayName": "Country"}}, "frame": {"showTitle": true, "title": "Performance by Country", "showDescription": false}}
          },
          "position": {"x": 0, "y": 0, "width": 12, "height": 6}
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    }
  ]
}
