{
  "datasets": [
    {
      "name": "m0_ds_routing",
      "displayName": "Solution Performance",
      "queryLines": [
        "SELECT payment_solution, transaction_count, approved_count, approval_rate_pct, avg_fraud_score, avg_amount, total_value, avg_latency_ms FROM __CATALOG__.__SCHEMA__.v_solution_performance ORDER BY transaction_count DESC"
      ]
    },
    {
      "name": "m0_ds_card_network",
      "displayName": "Card Network Performance",
      "queryLines": [
        "SELECT card_network, transaction_count, approval_rate_pct, avg_amount, avg_fraud_score, avg_latency_ms FROM __CATALOG__.__SCHEMA__.v_card_network_performance ORDER BY transaction_count DESC"
      ]
    },
    {
      "name": "m0_ds_routing_kpis",
      "displayName": "Routing KPIs",
      "queryLines": [
        "SELECT COUNT(DISTINCT payment_solution) as total_solutions, ROUND(MAX(approval_rate_pct), 1) as best_approval_rate, ROUND(AVG(avg_latency_ms), 0) as avg_latency_ms FROM __CATALOG__.__SCHEMA__.v_solution_performance"
      ]
    },
    {
      "name": "m1_ds_top_decline",
      "displayName": "Top Decline Reasons",
      "queryLines": [
        "SELECT decline_reason, decline_count, pct_of_declines, avg_fraud_score, avg_amount, total_declined_value, affected_merchants, low_risk_declines, recoverable_pct FROM __CATALOG__.__SCHEMA__.v_top_decline_reasons ORDER BY decline_count DESC"
      ]
    },
    {
      "name": "m1_ds_decline_kpis",
      "displayName": "Decline KPIs",
      "queryLines": [
        "SELECT SUM(decline_count) as total_declines, ROUND(AVG(recoverable_pct), 1) as avg_recoverable_pct, SUM(total_declined_value) as total_declined_value FROM __CATALOG__.__SCHEMA__.v_top_decline_reasons"
      ]
    },
    {
      "name": "m1_ds_recovery",
      "displayName": "Decline Recovery Opportunities",
      "queryLines": [
        "SELECT decline_reason, merchant_segment, card_network, decline_count, potential_recovery_value, avg_fraud_score, avg_device_trust, recovery_likelihood, recommended_action FROM __CATALOG__.__SCHEMA__.v_decline_recovery_opportunities ORDER BY potential_recovery_value DESC LIMIT 100"
      ]
    },
    {
      "name": "m2_ds_fraud_kpis",
      "displayName": "Fraud & Risk KPIs",
      "queryLines": [
        "SELECT total_transactions, approved_count, declined_count, avg_fraud_score, avg_aml_risk_score, total_transaction_value FROM __CATALOG__.__SCHEMA__.v_executive_kpis LIMIT 1"
      ]
    },
    {
      "name": "m2_ds_decline_risk",
      "displayName": "Declines by Fraud Score",
      "queryLines": [
        "SELECT decline_reason, decline_count, avg_fraud_score, total_declined_value, recoverable_pct FROM __CATALOG__.__SCHEMA__.v_top_decline_reasons ORDER BY avg_fraud_score DESC"
      ]
    },
    {
      "name": "m3_ds_auth_kpis",
      "displayName": "3DS Usage",
      "queryLines": [
        "SELECT total_transactions, auth_3ds_usage_pct, approval_rate_pct, avg_fraud_score FROM __CATALOG__.__SCHEMA__.v_executive_kpis LIMIT 1"
      ]
    },
    {
      "name": "m3_ds_merchant_auth",
      "displayName": "Auth by Segment",
      "queryLines": [
        "SELECT merchant_segment, transaction_count, approval_rate_pct, auth_3ds_usage_pct FROM __CATALOG__.__SCHEMA__.v_merchant_segment_performance ORDER BY transaction_count DESC"
      ]
    },
    {
      "name": "m4_ds_financial",
      "displayName": "Transaction Value",
      "queryLines": [
        "SELECT total_transaction_value, approved_value, declined_value, avg_transaction_amount, total_transactions, approved_count, declined_count FROM __CATALOG__.__SCHEMA__.v_executive_kpis LIMIT 1"
      ]
    },
    {
      "name": "m4_ds_decline_value",
      "displayName": "Declined Value by Reason",
      "queryLines": [
        "SELECT decline_reason, total_declined_value, decline_count, recoverable_pct FROM __CATALOG__.__SCHEMA__.v_top_decline_reasons ORDER BY total_declined_value DESC"
      ]
    }
  ],
  "pages": [
    {
      "name": "page_routing",
      "displayName": "Smart Routing & Optimization",
      "layout": [
        {
          "widget": {
            "name": "ctr_solutions",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_routing_kpis", "fields": [{"name": "total_solutions", "expression": "`total_solutions`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "total_solutions", "displayName": "Active Solutions"}}, "frame": {"showTitle": true, "title": "Active Payment Solutions", "showDescription": false}}
          },
          "position": {"x": 0, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_best_rate",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_routing_kpis", "fields": [{"name": "best_approval_rate", "expression": "`best_approval_rate`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "best_approval_rate", "displayName": "Best Approval Rate %"}}, "frame": {"showTitle": true, "title": "Best Approval Rate %", "showDescription": false}}
          },
          "position": {"x": 4, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_avg_latency",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_routing_kpis", "fields": [{"name": "avg_latency_ms", "expression": "`avg_latency_ms`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "avg_latency_ms", "displayName": "Avg Latency (ms)"}}, "frame": {"showTitle": true, "title": "Average Latency (ms)", "showDescription": false}}
          },
          "position": {"x": 8, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "bar_solution",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_routing", "fields": [{"name": "payment_solution", "expression": "`payment_solution`"}, {"name": "sum(transaction_count)", "expression": "SUM(`transaction_count`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "bar", "encodings": {"x": {"fieldName": "sum(transaction_count)", "scale": {"type": "quantitative"}, "displayName": "Transaction Count", "axis": {"title": "Transaction Count"}}, "y": {"fieldName": "payment_solution", "scale": {"type": "categorical", "sort": {"by": "x-reversed"}}, "displayName": "Payment Solution", "axis": {"title": "Payment Solution"}}}, "frame": {"showTitle": true, "title": "Solution Performance (by Volume)", "showDescription": false}}
          },
          "position": {"x": 0, "y": 2, "width": 6, "height": 5}
        },
        {
          "widget": {
            "name": "bar_network",
            "queries": [{"name": "main_query", "query": {"datasetName": "m0_ds_card_network", "fields": [{"name": "card_network", "expression": "`card_network`"}, {"name": "sum(transaction_count)", "expression": "SUM(`transaction_count`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "bar", "encodings": {"x": {"fieldName": "sum(transaction_count)", "scale": {"type": "quantitative"}, "displayName": "Transaction Count", "axis": {"title": "Transaction Count"}}, "y": {"fieldName": "card_network", "scale": {"type": "categorical", "sort": {"by": "x-reversed"}}, "displayName": "Card Network", "axis": {"title": "Card Network"}}}, "frame": {"showTitle": true, "title": "Card Network Performance", "showDescription": false}}
          },
          "position": {"x": 6, "y": 2, "width": 6, "height": 5}
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "page_decline",
      "displayName": "Decline Analysis & Recovery",
      "layout": [
        {
          "widget": {
            "name": "ctr_total_declines",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_decline_kpis", "fields": [{"name": "total_declines", "expression": "`total_declines`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "total_declines", "displayName": "Total Declines"}}, "frame": {"showTitle": true, "title": "Total Declines", "showDescription": false}}
          },
          "position": {"x": 0, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_recoverable",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_decline_kpis", "fields": [{"name": "avg_recoverable_pct", "expression": "`avg_recoverable_pct`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "avg_recoverable_pct", "displayName": "Recoverable %"}}, "frame": {"showTitle": true, "title": "Avg Recoverable %", "showDescription": false}}
          },
          "position": {"x": 4, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_declined_value",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_decline_kpis", "fields": [{"name": "total_declined_value", "expression": "`total_declined_value`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "total_declined_value", "displayName": "Total Declined Value"}}, "frame": {"showTitle": true, "title": "Total Declined Value", "showDescription": false}}
          },
          "position": {"x": 8, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "bar_decline_reasons",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_top_decline", "fields": [{"name": "decline_reason", "expression": "`decline_reason`"}, {"name": "sum(decline_count)", "expression": "SUM(`decline_count`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "bar", "encodings": {"x": {"fieldName": "sum(decline_count)", "scale": {"type": "quantitative"}, "displayName": "Decline Count", "axis": {"title": "Decline Count"}}, "y": {"fieldName": "decline_reason", "scale": {"type": "categorical", "sort": {"by": "x-reversed"}}, "displayName": "Decline Reason", "axis": {"title": "Decline Reason"}}}, "frame": {"showTitle": true, "title": "Top Decline Reasons", "showDescription": false}}
          },
          "position": {"x": 0, "y": 2, "width": 12, "height": 5}
        },
        {
          "widget": {
            "name": "heatmap_recovery",
            "queries": [{"name": "main_query", "query": {"datasetName": "m1_ds_recovery", "fields": [{"name": "decline_reason", "expression": "`decline_reason`"}, {"name": "merchant_segment", "expression": "`merchant_segment`"}, {"name": "sum(decline_count)", "expression": "SUM(`decline_count`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "heatmap", "encodings": {"x": {"fieldName": "decline_reason", "scale": {"type": "categorical"}, "displayName": "Decline Reason", "axis": {"title": "Decline Reason"}}, "y": {"fieldName": "merchant_segment", "scale": {"type": "categorical"}, "displayName": "Merchant Segment", "axis": {"title": "Merchant Segment"}}, "color": {"fieldName": "sum(decline_count)", "scale": {"type": "quantitative"}, "displayName": "Decline Count"}}, "frame": {"showTitle": true, "title": "Decline Recovery Opportunities (Heatmap)", "showDescription": false}}
          },
          "position": {"x": 0, "y": 7, "width": 12, "height": 5}
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "page_fraud",
      "displayName": "Fraud & Risk Analysis",
      "layout": [
        {
          "widget": {
            "name": "ctr_fraud_score",
            "queries": [{"name": "main_query", "query": {"datasetName": "m2_ds_fraud_kpis", "fields": [{"name": "avg_fraud_score", "expression": "`avg_fraud_score`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "avg_fraud_score", "displayName": "Avg Fraud Score"}}, "frame": {"showTitle": true, "title": "Avg Fraud Score", "showDescription": false}}
          },
          "position": {"x": 0, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_aml_risk",
            "queries": [{"name": "main_query", "query": {"datasetName": "m2_ds_fraud_kpis", "fields": [{"name": "avg_aml_risk_score", "expression": "`avg_aml_risk_score`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "avg_aml_risk_score", "displayName": "Avg AML Risk Score"}}, "frame": {"showTitle": true, "title": "Avg AML Risk Score", "showDescription": false}}
          },
          "position": {"x": 4, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_fraud_declined",
            "queries": [{"name": "main_query", "query": {"datasetName": "m2_ds_fraud_kpis", "fields": [{"name": "declined_count", "expression": "`declined_count`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "declined_count", "displayName": "Declined Count"}}, "frame": {"showTitle": true, "title": "Declined Transactions", "showDescription": false}}
          },
          "position": {"x": 8, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "bar_decline_risk",
            "queries": [{"name": "main_query", "query": {"datasetName": "m2_ds_decline_risk", "fields": [{"name": "decline_reason", "expression": "`decline_reason`"}, {"name": "sum(avg_fraud_score)", "expression": "SUM(`avg_fraud_score`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "bar", "encodings": {"x": {"fieldName": "sum(avg_fraud_score)", "scale": {"type": "quantitative"}, "displayName": "Avg Fraud Score", "axis": {"title": "Avg Fraud Score"}}, "y": {"fieldName": "decline_reason", "scale": {"type": "categorical", "sort": {"by": "x-reversed"}}, "displayName": "Decline Reason", "axis": {"title": "Decline Reason"}}}, "frame": {"showTitle": true, "title": "Decline Reasons by Fraud Risk Level", "showDescription": false}}
          },
          "position": {"x": 0, "y": 2, "width": 12, "height": 5}
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "page_auth",
      "displayName": "3DS Authentication & Security",
      "layout": [
        {
          "widget": {
            "name": "ctr_3ds",
            "queries": [{"name": "main_query", "query": {"datasetName": "m3_ds_auth_kpis", "fields": [{"name": "auth_3ds_usage_pct", "expression": "`auth_3ds_usage_pct`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "auth_3ds_usage_pct", "displayName": "3DS Usage %"}}, "frame": {"showTitle": true, "title": "3DS Usage %", "showDescription": false}}
          },
          "position": {"x": 0, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_auth_approval",
            "queries": [{"name": "main_query", "query": {"datasetName": "m3_ds_auth_kpis", "fields": [{"name": "approval_rate_pct", "expression": "`approval_rate_pct`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "approval_rate_pct", "displayName": "Approval Rate %"}}, "frame": {"showTitle": true, "title": "Approval Rate %", "showDescription": false}}
          },
          "position": {"x": 4, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_auth_fraud",
            "queries": [{"name": "main_query", "query": {"datasetName": "m3_ds_auth_kpis", "fields": [{"name": "avg_fraud_score", "expression": "`avg_fraud_score`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "avg_fraud_score", "displayName": "Avg Fraud Score"}}, "frame": {"showTitle": true, "title": "Avg Fraud Score", "showDescription": false}}
          },
          "position": {"x": 8, "y": 0, "width": 4, "height": 2}
        },
        {
          "widget": {
            "name": "bar_auth_volume",
            "queries": [{"name": "main_query", "query": {"datasetName": "m3_ds_merchant_auth", "fields": [{"name": "merchant_segment", "expression": "`merchant_segment`"}, {"name": "sum(transaction_count)", "expression": "SUM(`transaction_count`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "bar", "encodings": {"x": {"fieldName": "sum(transaction_count)", "scale": {"type": "quantitative"}, "displayName": "Transaction Count", "axis": {"title": "Transaction Count"}}, "y": {"fieldName": "merchant_segment", "scale": {"type": "categorical", "sort": {"by": "x-reversed"}}, "displayName": "Merchant Segment", "axis": {"title": "Merchant Segment"}}}, "frame": {"showTitle": true, "title": "Transaction Volume by Segment", "showDescription": false}}
          },
          "position": {"x": 0, "y": 2, "width": 6, "height": 5}
        },
        {
          "widget": {
            "name": "bar_auth_approval",
            "queries": [{"name": "main_query", "query": {"datasetName": "m3_ds_merchant_auth", "fields": [{"name": "merchant_segment", "expression": "`merchant_segment`"}, {"name": "sum(approval_rate_pct)", "expression": "SUM(`approval_rate_pct`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "bar", "encodings": {"x": {"fieldName": "sum(approval_rate_pct)", "scale": {"type": "quantitative"}, "displayName": "Approval Rate %", "axis": {"title": "Approval Rate %"}}, "y": {"fieldName": "merchant_segment", "scale": {"type": "categorical", "sort": {"by": "x-reversed"}}, "displayName": "Merchant Segment", "axis": {"title": "Merchant Segment"}}}, "frame": {"showTitle": true, "title": "Approval Rate by Segment", "showDescription": false}}
          },
          "position": {"x": 6, "y": 2, "width": 6, "height": 5}
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "page_financial",
      "displayName": "Financial Impact & ROI",
      "layout": [
        {
          "widget": {
            "name": "ctr_fin_total",
            "queries": [{"name": "main_query", "query": {"datasetName": "m4_ds_financial", "fields": [{"name": "total_transaction_value", "expression": "`total_transaction_value`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "total_transaction_value", "displayName": "Total Value"}}, "frame": {"showTitle": true, "title": "Total Transaction Value", "showDescription": false}}
          },
          "position": {"x": 0, "y": 0, "width": 3, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_fin_approved",
            "queries": [{"name": "main_query", "query": {"datasetName": "m4_ds_financial", "fields": [{"name": "approved_value", "expression": "`approved_value`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "approved_value", "displayName": "Approved Value"}}, "frame": {"showTitle": true, "title": "Approved Value", "showDescription": false}}
          },
          "position": {"x": 3, "y": 0, "width": 3, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_fin_declined",
            "queries": [{"name": "main_query", "query": {"datasetName": "m4_ds_financial", "fields": [{"name": "declined_value", "expression": "`declined_value`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "declined_value", "displayName": "Declined Value"}}, "frame": {"showTitle": true, "title": "Declined Value", "showDescription": false}}
          },
          "position": {"x": 6, "y": 0, "width": 3, "height": 2}
        },
        {
          "widget": {
            "name": "ctr_fin_avg",
            "queries": [{"name": "main_query", "query": {"datasetName": "m4_ds_financial", "fields": [{"name": "avg_transaction_amount", "expression": "`avg_transaction_amount`"}], "disaggregated": true}}],
            "spec": {"version": 3, "widgetType": "counter", "encodings": {"value": {"fieldName": "avg_transaction_amount", "displayName": "Avg Amount"}}, "frame": {"showTitle": true, "title": "Avg Transaction Amount", "showDescription": false}}
          },
          "position": {"x": 9, "y": 0, "width": 3, "height": 2}
        },
        {
          "widget": {
            "name": "bar_declined_value",
            "queries": [{"name": "main_query", "query": {"datasetName": "m4_ds_decline_value", "fields": [{"name": "decline_reason", "expression": "`decline_reason`"}, {"name": "sum(total_declined_value)", "expression": "SUM(`total_declined_value`)"}], "disaggregated": false}}],
            "spec": {"version": 3, "widgetType": "bar", "encodings": {"x": {"fieldName": "sum(total_declined_value)", "scale": {"type": "quantitative"}, "displayName": "Declined Value", "axis": {"title": "Total Declined Value"}}, "y": {"fieldName": "decline_reason", "scale": {"type": "categorical", "sort": {"by": "x-reversed"}}, "displayName": "Decline Reason", "axis": {"title": "Decline Reason"}}}, "frame": {"showTitle": true, "title": "Declined Value by Reason", "showDescription": false}}
          },
          "position": {"x": 0, "y": 2, "width": 12, "height": 5}
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    }
  ]
}
