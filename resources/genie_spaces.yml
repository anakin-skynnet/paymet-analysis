# =============================================================================
# Genie Space Sync Job
# =============================================================================
# Syncs Genie space configuration and sample questions for natural language
# analytics over payment data. Catalog/schema from variables.
# =============================================================================

resources:
  jobs:
    genie_sync_job:
      name: "[${var.environment}] Genie Space Sync"
      description: "Syncs Genie space configuration and sample questions for natural language analytics"
      tasks:
        - task_key: sync_genie_config
          description: "Sync Genie space configuration"
          notebook_task:
            notebook_path: ${workspace.file_path}/src/payment_analysis/genie/sync_genie_space
            base_parameters:
              catalog: ${var.catalog}
              schema: ${var.schema}
          new_cluster:
            spark_version: "15.4.x-scala2.12"
            node_type_id: "Standard_DS3_v2"
            num_workers: 0
            spark_conf:
              spark.databricks.cluster.profile: singleNode
              spark.master: "local[*]"
            custom_tags:
              ResourceClass: SingleNode
          timeout_seconds: 600
      schedule:
        quartz_cron_expression: "0 0 5 ? * SUN"
        timezone_id: "UTC"
        pause_status: "PAUSED"
      tags:
        environment: ${var.environment}
        project: payment-analysis
        component: genie
        domain: payment-analytics
